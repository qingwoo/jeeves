package com.cherry.jeeves.domain.shared;

import com.cherry.jeeves.utils.JsonUtils;
import com.cherry.jeeves.utils.XmlUtils;
import org.apache.commons.text.StringEscapeUtils;
import org.junit.Assert;
import org.junit.Test;

public class LinkContentTest {

    @Test
    public void link() {
        String xmlString = "&lt;msg&gt;&lt;appmsg appid=\"wx020a535dccd46c11\" sdkver=\"0\"&gt;&lt;title&gt;Vue、React、Angular最佳UI框架 - Fundebug - 简书&lt;/title&gt;&lt;des&gt;我正在看【Vue、React、Angular最佳UI框架 - Fundebug - 简书】，分享给你，一起看吧！&lt;/des&gt;&lt;username&gt;&lt;/username&gt;&lt;action&gt;view&lt;/action&gt;&lt;type&gt;5&lt;/type&gt;&lt;showtype&gt;3&lt;/showtype&gt;&lt;content&gt;&lt;/content&gt;&lt;url&gt;https://www.jianshu.com/p/0051e626b88b&lt;/url&gt;&lt;lowurl&gt;&lt;/lowurl&gt;&lt;dataurl&gt;&lt;/dataurl&gt;&lt;lowdataurl&gt;&lt;/lowdataurl&gt;&lt;contentattr&gt;0&lt;/contentattr&gt;&lt;streamvideo&gt;&lt;streamvideourl&gt;&lt;/streamvideourl&gt;&lt;streamvideototaltime&gt;0&lt;/streamvideototaltime&gt;&lt;streamvideotitle&gt;&lt;/streamvideotitle&gt;&lt;streamvideowording&gt;&lt;/streamvideowording&gt;&lt;streamvideoweburl&gt;&lt;/streamvideoweburl&gt;&lt;streamvideothumburl&gt;&lt;/streamvideothumburl&gt;&lt;streamvideoaduxinfo&gt;&lt;/streamvideoaduxinfo&gt;&lt;streamvideopublishid&gt;&lt;/streamvideopublishid&gt;&lt;/streamvideo&gt;&lt;canvasPageItem&gt;&lt;canvasPageXml&gt;&lt;![CDATA[]]&gt;&lt;/canvasPageXml&gt;&lt;/canvasPageItem&gt;&lt;appattach&gt;&lt;attachid&gt;&lt;/attachid&gt;&lt;cdnthumburl&gt;305c0201000455305302010002042bf4b1ec02033d14b902041ee6607102045b703295042e6175706170706d73675f616531346335316235613639663635325f313533343037393633333738335f33313232310204010800030201000400&lt;/cdnthumburl&gt;&lt;cdnthumbmd5&gt;88e44c7e80531c6d419b4bd12631213b&lt;/cdnthumbmd5&gt;&lt;cdnthumblength&gt;14836&lt;/cdnthumblength&gt;&lt;cdnthumbheight&gt;80&lt;/cdnthumbheight&gt;&lt;cdnthumbwidth&gt;120&lt;/cdnthumbwidth&gt;&lt;cdnthumbaeskey&gt;434a56804eca49c48f66c4d570bbf99d&lt;/cdnthumbaeskey&gt;&lt;aeskey&gt;434a56804eca49c48f66c4d570bbf99d&lt;/aeskey&gt;&lt;encryver&gt;1&lt;/encryver&gt;&lt;fileext&gt;&lt;/fileext&gt;&lt;islargefilemsg&gt;0&lt;/islargefilemsg&gt;&lt;/appattach&gt;&lt;extinfo&gt;&lt;/extinfo&gt;&lt;androidsource&gt;3&lt;/androidsource&gt;&lt;thumburl&gt;&lt;/thumburl&gt;&lt;mediatagname&gt;&lt;/mediatagname&gt;&lt;messageaction&gt;&lt;![CDATA[]]&gt;&lt;/messageaction&gt;&lt;messageext&gt;&lt;![CDATA[]]&gt;&lt;/messageext&gt;&lt;emoticongift&gt;&lt;packageflag&gt;0&lt;/packageflag&gt;&lt;packageid&gt;&lt;/packageid&gt;&lt;/emoticongift&gt;&lt;emoticonshared&gt;&lt;packageflag&gt;0&lt;/packageflag&gt;&lt;packageid&gt;&lt;/packageid&gt;&lt;/emoticonshared&gt;&lt;designershared&gt;&lt;designeruin&gt;0&lt;/designeruin&gt;&lt;designername&gt;null&lt;/designername&gt;&lt;designerrediretcturl&gt;null&lt;/designerrediretcturl&gt;&lt;/designershared&gt;&lt;emotionpageshared&gt;&lt;tid&gt;0&lt;/tid&gt;&lt;title&gt;null&lt;/title&gt;&lt;desc&gt;null&lt;/desc&gt;&lt;iconUrl&gt;null&lt;/iconUrl&gt;&lt;secondUrl&gt;null&lt;/secondUrl&gt;&lt;pageType&gt;0&lt;/pageType&gt;&lt;/emotionpageshared&gt;&lt;webviewshared&gt;&lt;shareUrlOriginal&gt;&lt;/shareUrlOriginal&gt;&lt;shareUrlOpen&gt;&lt;/shareUrlOpen&gt;&lt;jsAppId&gt;&lt;/jsAppId&gt;&lt;publisherId&gt;&lt;/publisherId&gt;&lt;/webviewshared&gt;&lt;template_id&gt;&lt;/template_id&gt;&lt;md5&gt;88e44c7e80531c6d419b4bd12631213b&lt;/md5&gt;&lt;weappinfo&gt;&lt;username&gt;&lt;/username&gt;&lt;appid&gt;&lt;/appid&gt;&lt;appservicetype&gt;0&lt;/appservicetype&gt;&lt;/weappinfo&gt;&lt;statextstr&gt;GhQKEnd4MDIwYTUzNWRjY2Q0NmMxMQ==&lt;/statextstr&gt;&lt;websearch&gt;&lt;rec_category&gt;0&lt;/rec_category&gt;&lt;/websearch&gt;&lt;/appmsg&gt;&lt;fromusername&gt;&lt;/fromusername&gt;&lt;scene&gt;0&lt;/scene&gt;&lt;appinfo&gt;&lt;version&gt;2&lt;/version&gt;&lt;appname&gt;UC浏览器&lt;/appname&gt;&lt;/appinfo&gt;&lt;commenturl&gt;&lt;/commenturl&gt;&lt;/msg&gt;";
        LinkContent content = XmlUtils.toObject(StringEscapeUtils.unescapeXml(xmlString), LinkContent.class);
        System.out.println(JsonUtils.toPrettyJson(content));
        Assert.assertEquals("https://www.jianshu.com/p/0051e626b88b", content.getAppmsg().getUrl());
    }
}